doctype html
html(lang="pt-br")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title GameStore Portal
    // Bootstrap 5
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css", rel="stylesheet")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css", rel="stylesheet")
    style.
      body { min-height: 100vh; overflow-x: hidden; }
      .sidebar { min-height: 100vh; box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1); }
      .nav-link { color: #333; font-weight: 500; }
      .nav-link:hover { color: #0d6efd; background-color: #f8f9fa; }
  
  body
    div.container-fluid
      div.row
        // SIDEBAR (Coluna Esquerda)
        nav#sidebarMenu.col-md-3.col-lg-2.d-md-block.bg-light.sidebar.collapse
          div.position-sticky.pt-3
            div.text-center.mb-4.mt-2
              i.bi.bi-joystick.text-primary(style="font-size: 2rem;")
              h5.mt-2 GameStore
            
            h6.sidebar-heading.d-flex.justify-content-between.align-items-center.px-3.mt-4.mb-1.text-muted
              span Menu Principal

            ul.nav.flex-column
              li.nav-item
                a.nav-link(href="/loja")
                  i.bi.bi-shop.me-2
                  | Loja de Jogos
              
              if user && user.role === 'user'
                li.nav-item
                  a.nav-link(href="/biblioteca" class=(page === 'biblioteca' ? 'active' : ''))
                    i.bi.bi-collection-play
                    | Minha Biblioteca
              
              // Link Dashboard APENAS para Admin
              if user && user.role === 'admin'
                li.nav-item
                  a.nav-link.text-primary(href="/dashboard")
                    i.bi.bi-speedometer2.me-2
                    | Dashboard Admin

            // SEÇÃO DE USUÁRIO NA SIDEBAR
            h6.sidebar-heading.d-flex.justify-content-between.align-items-center.px-3.mt-4.mb-1.text-muted
              span Minha Conta

            div.px-3.mt-3
              if user
                // USUÁRIO LOGADO
                div.card.border-0.bg-light
                  div.card-body.p-0
                    p.fw-bold.mb-1= user.nome
                    
                    // MOSTRAR SALDO
                    div.badge.bg-success.mb-3.d-block.p-2
                      i.bi.bi-wallet2.me-2
                      | Saldo: R$ #{user.saldo.toFixed(2).replace('.', ',')}
                    
                    div.d-grid
                      a.btn.btn-outline-danger.btn-sm(href="/auth/logout")
                        i.bi.bi-box-arrow-right.me-2
                        | Sair
              else
                // VISITANTE
                div.d-grid
                  a.btn.btn-primary(href="/login")
                    i.bi.bi-box-arrow-in-right.me-2
                    | Fazer Login

        // CONTEÚDO PRINCIPAL (Coluna Direita)
        main.col-md-9.ms-sm-auto.col-lg-10.px-md-4.py-4
          block content

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")